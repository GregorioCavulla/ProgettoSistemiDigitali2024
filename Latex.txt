\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{geometry}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{hyperref}

\geometry{margin=1in}

\definecolor{codebg}{rgb}{0.95,0.95,0.95}
\definecolor{keyword}{rgb}{0.5,0,0.5}
\definecolor{comment}{rgb}{0,0.5,0}

\lstset{
  backgroundcolor=\color{codebg},
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{keyword}\bfseries,
  commentstyle=\color{comment}\itshape,
  stringstyle=\color{blue},
  numbers=left,
  numberstyle=\tiny,
  stepnumber=1,
  frame=single,
  breaklines=true,
  tabsize=4,
  showspaces=false,
  showtabs=false,
  showstringspaces=false
}

\title{Elaborazione Sequenziale di Segnali Audio con DFT e IDFT}
\author{}
\date{}

\begin{document}

\maketitle

\tableofcontents

\section{Introduzione}
Questo progetto si propone di elaborare segnali audio utilizzando un approccio sequenziale. L'obiettivo \`e implementare trasformazioni nel dominio delle frequenze per applicare un filtro passa-basso e produrre un segnale audio modificato. Il processo comprende le seguenti fasi:
\begin{itemize}
    \item Lettura di un file audio in formato \texttt{.wav};
    \item Calcolo della Trasformata Discreta di Fourier (DFT);
    \item Applicazione di un filtro passa-basso nel dominio delle frequenze;
    \item Calcolo della Trasformata Inversa (IDFT);
    \item Scrittura del segnale audio modificato su file;
    \item Generazione di un report sui tempi di esecuzione.
\end{itemize}

\subsection{Fase di test}
Tutti i codici sviluppati verranno testati su due macchine differenti per apprezzare la differenza tra architetture delle CPU e lo scarto generazionale delle GPU. Le macchine in questione hanno le seguenti specifiche:

\\

\begin{tabular}{|c|c|c|}
\hline
\textbf{} & \textbf{Macchina 1} & \textbf{Macchina 2} \\ \hline
CPU   & Intel Core i7-12650H  & AMD Ryzen 7 8845HS\\ \hline
GPU    & NVIDIA GeForce 3050 & NVIDIA GeForce RTX 4050 Max-Q \\ \hline
O.S. & Ubuntu 22.04 on wsl & Fedora Linux 41 \\ \hline
\end{tabular}

\section{Implementazione Sequenziale}
Il codice \`e stato scritto in linguaggio \texttt{C} e utilizza le librerie standard per la manipolazione di file e la misurazione del tempo. La struttura principale del programma comprende:

\subsection{Lettura e Scrittura di File Audio}
I file audio sono letti e scritti in formato \texttt{.wav} standard, utilizzando un'intestazione di 44 byte per rappresentare i metadati del file. Le seguenti funzioni implementano la lettura e scrittura dei file audio:

\lstinputlisting[language=C, firstline=36, lastline=57, caption={Funzione per leggere file audio .wav.}]{DFTsequenziale.c}

\lstinputlisting[language=C, firstline=58, lastline=111, caption={Funzione per scrivere file audio .wav.}]{DFTsequenziale.c}

\subsection{Trasformata Discreta di Fourier (DFT)}
La DFT converte un segnale audio dal dominio del tempo a quello delle frequenze. La funzione \texttt{dft()} implementa la seguente formula:
\begin{equation}
    X[k] = \sum_{n=0}^{N-1} x[n] \cdot \cos\left(\frac{2\pi k n}{N}\right)
\end{equation}

\lstinputlisting[language=C, firstline=112, lastline=121, caption={Implementazione della DFT.}]{DFTsequenziale.c}

\subsection{Filtro Passa-Basso}
Un filtro passa-basso \`e applicato nel dominio delle frequenze per rimuovere le componenti indesiderate. La funzione \texttt{filtro()} azzera le frequenze al di fuori di una soglia specificata:

\lstinputlisting[language=C, firstline=122, lastline=130, caption={Applicazione del filtro passa-basso.}]{DFTsequenziale.c}

\subsection{Trasformata Inversa (IDFT)}
La IDFT riporta il segnale audio dal dominio delle frequenze al dominio del tempo. La funzione \texttt{idft()} \`e basata sulla formula:
\begin{equation}
    x[n] = \frac{1}{N} \sum_{k=0}^{N-1} X[k] \cdot \cos\left(\frac{2\pi k n}{N}\right)
\end{equation}

\lstinputlisting[language=C, firstline=131, lastline=141, caption={Implementazione della IDFT.}]{DFTsequenziale.c}

\subsection{Misurazione delle Prestazioni}
I tempi di esecuzione delle diverse fasi del programma vengono misurati e riportati in un file di testo:

\lstinputlisting[language=C, firstline=142, lastline=159, caption={Funzione per scrivere il report dei tempi.}]{DFTsequenziale.c}

\section{Esecuzione del Programma}
La funzione \texttt{main()} coordina l'intero processo, dalla lettura del file audio alla scrittura dei risultati. Viene utilizzata la libreria \texttt{time.h} per misurare i tempi di esecuzione:

\lstinputlisting[language=C, firstline=160, lastline=231, caption={Funzione main del programma.}]{DFTsequenziale.c}

\section{Risultati}
Il programma \`e stato testato su un file audio mono con 44.1 kHz di frequenza di campionamento e una durata di 0,5s e 5s . 

I risultati della applicazione del filtro si trovano nella directory \texttt{./output}, ogni file generato dal programma possiede nel nome il timestamp dell'esecuzione nel formato \textt{Ymd\_HMS} (anno, mese, giorno, ore, minuti, secondi).

I tempi di esecuzione sono riportati nei file all'interndo della directory \texttt{./reports}. I risultati mostrano tempi di calcolo consistenti con le complessit\`a delle operazioni.

Le seguenti tabelle mostrano i risultati ottenuti su entrambe le macchine e entrambi i file di input.


\end{document}
